<h1>新規施設登録</h1>
<h3>施設基本情報</h3>
<%= form_for(@post, url:posts_path) do |f| %>
    <div class="field">
      <%= f.label :喫茶店名 %>
      <%= f.text_field :name,id: 'address',:size => 50 %>
      <input type="button" value="住所検索" onclick="codeAddress()">
      <div id="latlngDisplay"></div>
      <div id="addressDisplay">住所</div>
      <div id='map'></div>
      
      <style>
      #map {
        height: 300px;
        width: 300px;
      }
      </style>
      
      
      <script>
      let map
      
      const latlngDis = document.getElementById('latlngDisplay')
      const addressDis = document.getElementById('addressDisplay')
      
      function initMap(){
        geocoder = new google.maps.Geocoder()
      
        tokyo = {lat: 35.6803997, lng: 139.7690174}
      
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 35.6803997, lng: 139.7690174},
          zoom: 15,
        });
      
        marker = new google.maps.Marker({
          position: {lat: 35.6803997, lng: 139.7690174},
          map: map
        });
      }
      
      let geocoder
      const display = document.getElementById('display')
      
      
      function codeAddress(){
        let inputAddress = document.getElementById('address').value;
      
        geocoder.geocode( { 'address': inputAddress}, function(results, status) {
          if (status == 'OK') {
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });
            latlngDis.innerHTML = results[0].geometry.location;
      
            geocoder.geocode({ 'location': marker.getPosition()}, function(results, status) {
              if (status == "OK"){
                addressDis.innerHTML = results[0].formatted_address;
              } else {
                alert("Geocode 取得に失敗しました：" + status);
              }
            });
      
          } else {
            alert('該当する結果がありませんでした：' + status);
          }
        });   
      }
      
      </script>
      <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAZoCXf8qQakMaUk3JLDRu0QRwGBhbd540&callback=initMap" async defer></script>
                  
      <br>  
      <%= f.label :都道府県 %>
      <%= f.text_field :prefecture, :size => 30 %><br>
      <%= f.label :住所 %>
      <%= f.text_field :address, :size => 70 %><br>
      <%= f.label :tel %>
      <%= f.text_field :tel, :size => 100 %><br>
      <%= f.label :HP %>
      <%= f.text_field :hp, :size => 100 %><br>
      <%= f.label :営業時間 %>
      <%= f.text_area :business_hours, class:"hoge", size: "30x10" %><br>
      <%= f.label :写真トップ %>
      <%= f.file_field :image %><br>
      <%= f.label :写真2 %>
      <%= f.file_field :image_two %><br>
      <%= f.label :写真3 %>
      <%= f.file_field :image_three %><br>
      <%= f.label :写真4 %>
      <%= f.file_field :image_four %><br>
      <%= f.label :写真5 %>
      <%= f.file_field :image_five %><br>
      <%= f.label :写真6 %>
      <%= f.file_field :image_six %><br>
      <%= f.label :電源 %>
      <%= f.radio_button :outlet, "電源" %><br>
      <%= f.label :デザート %>
      <%= f.radio_button :dessert, "デザート" %><br>
      <%= f.label :ランチメニュー %>
      <%= f.radio_button :lunch, "ランチメニュー" %><br>
      <%= f.label :軽食（サンドウィッチ等） %>
      <%= f.radio_button :snack, "軽食" %><br>
      <%= f.label :たばこ %>
      <%= f.radio_button :tobacco, "たばこ" %><br>
      <%= f.label :駐車場 %>
      <%= f.radio_button :parking, "駐車場" %><br>
      <%= f.check_box :wifi %>
      <%= f.label :wifi, "wifi" %>

     
    </div>
    <%= f.submit "投稿" %>
<% end %>                        
<%= link_to "トップページ", root_path %>

<script>
      var remove = 0;

      function radioDeselection(already, numeric) {
        if(remove == numeric) {
          already.checked = false;
          remove = 0;
        } else {
          remove = numeric;
        }
      }
</script>



      

      
      